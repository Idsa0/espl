
<!-- saved from url=(0110)https://moodle.bgu.ac.il/moodle/pluginfile.php/4400692/mod_resource/content/9/Lab3ReadingMaterial.html?embed=1 -->
<html data-darkreader-mode="dynamic" data-darkreader-scheme="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style class="darkreader darkreader--fallback" media="screen"></style><style class="darkreader darkreader--text" media="screen"></style><style class="darkreader darkreader--invert" media="screen">.jfk-bubble.gtx-bubble, .captcheck_answer_label > input + img, span#closed_text > img[src^="https://www.gstatic.com/images/branding/googlelogo"], span[data-href^="https://www.hcaptcha.com/"] > #icon, ::-webkit-calendar-picker-indicator, img.Wirisformula {
    filter: invert(100%) hue-rotate(180deg) contrast(90%) !important;
}</style><style class="darkreader darkreader--inline" media="screen">[data-darkreader-inline-bgcolor] {
  background-color: var(--darkreader-inline-bgcolor) !important;
}
[data-darkreader-inline-bgimage] {
  background-image: var(--darkreader-inline-bgimage) !important;
}
[data-darkreader-inline-border] {
  border-color: var(--darkreader-inline-border) !important;
}
[data-darkreader-inline-border-bottom] {
  border-bottom-color: var(--darkreader-inline-border-bottom) !important;
}
[data-darkreader-inline-border-left] {
  border-left-color: var(--darkreader-inline-border-left) !important;
}
[data-darkreader-inline-border-right] {
  border-right-color: var(--darkreader-inline-border-right) !important;
}
[data-darkreader-inline-border-top] {
  border-top-color: var(--darkreader-inline-border-top) !important;
}
[data-darkreader-inline-boxshadow] {
  box-shadow: var(--darkreader-inline-boxshadow) !important;
}
[data-darkreader-inline-color] {
  color: var(--darkreader-inline-color) !important;
}
[data-darkreader-inline-fill] {
  fill: var(--darkreader-inline-fill) !important;
}
[data-darkreader-inline-stroke] {
  stroke: var(--darkreader-inline-stroke) !important;
}
[data-darkreader-inline-outline] {
  outline-color: var(--darkreader-inline-outline) !important;
}
[data-darkreader-inline-stopcolor] {
  stop-color: var(--darkreader-inline-stopcolor) !important;
}
[data-darkreader-inline-bg] {
  background: var(--darkreader-inline-bg) !important;
}
[data-darkreader-inline-invert] {
    filter: invert(100%) hue-rotate(180deg);
}</style><style class="darkreader darkreader--variables" media="screen">:root {
   --darkreader-neutral-background: #131516;
   --darkreader-neutral-text: #d8d4cf;
   --darkreader-selection-background: #004daa;
   --darkreader-selection-text: #e8e6e3;
}</style><style class="darkreader darkreader--root-vars" media="screen"></style><style class="darkreader darkreader--user-agent" media="screen">@layer {
html {
    background-color: #181a1b !important;
}
html {
    color-scheme: dark !important;
}
iframe {
    color-scheme: initial;
}
html, body {
    background-color: #181a1b;
}
html, body {
    border-color: #736b5e;
    color: #e8e6e3;
}
a {
    color: #3391ff;
}
table {
    border-color: #545b5e;
}
mark {
    color: #e8e6e3;
}
::placeholder {
    color: #b2aba1;
}
input:-webkit-autofill,
textarea:-webkit-autofill,
select:-webkit-autofill {
    background-color: #404400 !important;
    color: #e8e6e3 !important;
}
::-webkit-scrollbar {
    background-color: #202324;
    color: #aba499;
}
::-webkit-scrollbar-thumb {
    background-color: #454a4d;
}
::-webkit-scrollbar-thumb:hover {
    background-color: #575e62;
}
::-webkit-scrollbar-thumb:active {
    background-color: #484e51;
}
::-webkit-scrollbar-corner {
    background-color: #181a1b;
}
::selection {
    background-color: #004daa !important;
    color: #e8e6e3 !important;
}
::-moz-selection {
    background-color: #004daa !important;
    color: #e8e6e3 !important;
}
}</style><meta name="darkreader" content="731fd3622b2d4b399714315bb1811f42"><style class="darkreader darkreader--override" media="screen">.vimvixen-hint {
    background-color: #7b5300 !important;
    border-color: #d8b013 !important;
    color: #f3e8c8 !important;
}
#vimvixen-console-frame {
    color-scheme: light !important;
}
::placeholder {
    opacity: 0.5 !important;
}
#edge-translate-panel-body,
.MuiTypography-body1,
.nfe-quote-text {
    color: var(--darkreader-neutral-text) !important;
}
gr-main-header {
    background-color: #0f3a48 !important;
}
.tou-z65h9k,
.tou-mignzq,
.tou-1b6i2ox,
.tou-lnqlqk {
    background-color: var(--darkreader-neutral-background) !important;
}
.tou-75mvi {
    background-color: #032029 !important;
}
.tou-ta9e87,
.tou-1w3fhi0,
.tou-1b8t2us,
.tou-py7lfi,
.tou-1lpmd9d,
.tou-1frrtv8,
.tou-17ezmgn {
    background-color: #0a0a0a !important;
}
.tou-uknfeu {
    background-color: #231603 !important;
}
.tou-6i3zyv {
    background-color: #19576c !important;
}
div.mermaid-viewer-control-panel .btn {
    background-color: var(--darkreader-neutral-background);
    fill: var(--darkreader-neutral-text);
}
svg g rect.er {
    fill: var(--darkreader-neutral-background) !important;
}
svg g rect.er.entityBox {
    fill: var(--darkreader-neutral-background) !important;
}
svg g rect.er.attributeBoxOdd {
    fill: var(--darkreader-neutral-background) !important;
}
svg g rect.er.attributeBoxEven {
    fill: var(--darkreader-selection-background);
    fill-opacity: 0.8 !important;
}
svg rect.er.relationshipLabelBox {
    fill: var(--darkreader-neutral-background) !important;
}
svg g g.nodes rect,
svg g g.nodes polygon {
    fill: var(--darkreader-neutral-background) !important;
}
svg g rect.task {
    fill: var(--darkreader-selection-background) !important;
}
svg line.messageLine0,
svg line.messageLine1 {
    stroke: var(--darkreader-neutral-text) !important;
}
div.mermaid .actor {
    fill: var(--darkreader-neutral-background) !important;
}
.google-material-icons {
    font-family: 'Google Material Icons' !important;
}
.google-symbols {
    font-family: 'Google Symbols Subset', 'Google Symbols' !important;
}
.material-icons-extended {
    font-family: 'Material Icons Extended' !important;
}
mitid-authenticators-code-app > .code-app-container {
    background-color: white !important;
    padding-top: 1rem;
}
iframe#unpaywall[src$="unpaywall.html"] {
    color-scheme: light !important;
}
.oui-icon {
    font-family: 'Oui Icons' !important;
}</style></head><body><h1>Lab3: Reading Material</h1>

<p>
    Lab 3 is dedicated to basic programming in Assembly language, getting familiar with basic instruction,
    addressing, direct system calls, and C function calling from Assembly code.
    <br>
</p>
<h4>Goals</h4>
<ol>
  <li> Basic proficiency in assembly language programming.</li>
  <li> Understanding the interface to the operating system services. </li>
  <li> Basic understanding of code manipulation, through implementation of executable file patches. </li>
 </ol>
 
<h4>Motivation</h4>
Aside from the clear advantages implicit in the above goals, the
resulting executable files are very small and simple, and require
little space to execute. This has clear performance advantages, when
such are desired.
Additionally, the object and executable files have a very simple
structure, and are easier to understand - something that will be
very useful in later labs.


<h3>C functions</h3>
In this lab you are required to process the arguments passed to the main function and print them. Read the manual about the main function
<a href="https://en.cppreference.com/w/c/language/main_function">man main</a>.

<h3>Assembly and NASM</h3>
In this course we use NASM, the Netwide Assembler: an assembler targetting the Intel x86 series of processors. Read
the <a href="https://www.nasm.us/doc/">NASM manual</a>. Review the lecture slides: Assembly Language Primer, and
read about each instruction shown in the lecture in the NASM manual for better understanding. Make sure to understand the basic arithmetic commands, flow commands,
effective addressing, variables "declaration", global, extern etc.
<br>
Read more about NASM registers <a href="https://nasm-tutorial.akash.website/basic/register.html">registers</a>.

<h4>Methodology</h4>

<ol>
  <li> You will be provided with basic startup code in assembly
language, (file start.s). The file contains just the "glue" code 
that starts up main( ) by getting argc and argv and passing
them to your main( ). It also contains an example of an assembly language "glue" to access Linux system services 
using the C "CDECL" calling convention.</li>
       <li> You should LOOK at the file first, and understand the code! </li>
   <li> Understand how to generate stand-alone code that uses only your
assembly language code and the "glue" from start.s, with no libraries whatsoever, using Linux system services: INT 0x80.</li>
  <li> All that needs be done is compiling your code, assembling the
glue code (start.s) and linking them together to produce an executable.
(Note: in future labs, you will learn how to write a simplified version
of ld - the linker - to create your executable from compiled object
modules). </li>
  <li> Exercise with some system calls, mainly file system related. </li>
</ol>


<h3>Additional Reading Material and references: system calls</h3>


Make sure you read and understand the following <b>before</b> attending the lab.
<ol>
<li> Read the "man 2" page for the following system calls: open, read, write, close (or re-read them if you have
read them before, just to make sure you understand them). Although these man pages are for standard-library interfaces to
the actual system calls, 
the functionality of these interfaces is the same as the actual system call, except for the issue of returned value and errors, 
and other minor issues.

It might benefit you to note that the system calls open( ), close( ), read( ), write( ) are also quite similar to some of the
functions that you have already used in previous labs: fopen( ), fclose( ), fread( ), fwrite( ), respectively. 
The difference is in the file descriptor (now int (index into an open file table held and managed by the system) rather than FILE* (which is a structure which 
also contains the above mentioned int index)), as well as some of the argument values, but the functionality is essentially the same.
The version with the "f" (e.g. fopen, fread, fwrite) that you have used before, provides an additional level of abstraction/wrapping.
  </li><li><a href="https://moodle.bgu.ac.il/moodle/pluginfile.php/3793875/mod_folder/content/0/system%20calls%20-%20lab%203%20.pdf?forcedownload=1">System calls: the basic mechanism for accessing OS services</a> <br>

<b>Note: Faulty Documentation!</b> Since the documentation of the actual <a href="https://asm.sourceforge.net/syscall.html"> 
Linux 32 bit system calls</a> is not so easy to read, we provide the
documentation based on the Linux man (2) of the respective wrapper functions. They are functionally the
same as the respective system call except for the <b>return value</b>.
The actual return value when an error occurs is a negative value that is <b>not</b> necessarilty -1
as stated in the documentation and the presentation. That is because the raw system calls have no access to
the errno variable. Instead, they return the negative value of the error
code.
Therefore, you need to check whether the returned value is less
than 0 rather than equal to -1. </li>

  <li> <a href="https://moodle.bgu.ac.il/moodle/pluginfile.php/3793875/mod_folder/content/0/lab3_exit.pdf?forcedownload=1">The exit system call</a>. </li>
 
  <li>  Notice that the code in the man page is different from what we expect (they use a different method for system calls - syscall, we expect you to
use the INT 0x80 system call directly. Again, make sure you do not include any external files. As always, If you use any code you didn't write yourself, make sure you understand everything  100%.
 </li>
 <li> For getdetns see directory: "Some Linux system calls: presentations",<a href="https://moodle.bgu.ac.il/moodle/pluginfile.php/3793875/mod_folder/content/0/lab3_getdents_%20.pdf?forcedownload=1">getdends</a>
 
 
</li></ol>

<h3>Additional Reading Material and references: hexedit</h3>

<p>
We will be working with "binary" files starting with this lab. 
Make sure you have hexedit installed and read about it sufficiently to be able to use it to examine a file and exit.


</p></body></html>